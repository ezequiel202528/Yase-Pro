<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yase Pro - Vinculação de Clientes</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- SDK do Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        .yase-aside { background-color: #1a1d2e; }
        .yase-sidebar-active {
            background: linear-gradient(90deg, #6366f1 0%, #4f46e5 100%);
            box-shadow: 0 4px 15px rgba(79, 70, 229, 0.4);
            color: white !important;
        }
        .yase-sidebar-item { color: #94a3b8; transition: all 0.2s; }
        .yase-sidebar-item:hover { color: white; background-color: rgba(255, 255, 255, 0.05); }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; height: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f1f1; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .table-row-selected { background-color: #f0f7ff !important; border-left: 4px solid #4f46e5 !important; }
        .yase-logo-icon { background-color: #f59e0b; color: #1a1d2e; }
        .filter-label { font-size: 9px; font-weight: 800; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 4px; display: block; }
        .filter-input { border: 1px solid #e2e8f0; border-radius: 6px; padding: 8px 12px; font-size: 13px; color: #475569; width: 100%; outline: none; transition: all 0.2s; }
        .filter-input:focus { border-color: #4f46e5; box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1); }
        .btn-buscar { background-color: #2563eb; color: white; font-weight: 800; font-size: 13px; letter-spacing: 0.02em; padding: 10px 40px; border-radius: 6px; transition: all 0.2s; cursor: pointer; }
        .btn-buscar:hover { background-color: #1d4ed8; box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3); }
        .sticky-header { position: sticky; top: 0; z-index: 20; background-color: #f1f5f9; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        
        /* Loading Overlay */
        #loadingOverlay { display: none; }

        td{
            text-align: center;
        }
    </style>
</head>
<body class="text-slate-700 flex h-screen overflow-hidden">

    <!-- Sidebar Yase Pro -->
    <aside class="w-64 yase-aside text-white flex-shrink-0 hidden lg:flex flex-col">
        <div class="p-6 flex items-center space-x-3">
            <div class="w-10 h-10 yase-logo-icon rounded-lg flex items-center justify-center shadow-lg">
                <i class="fas fa-fire-extinguisher text-lg"></i>
            </div>
            <div>
                <span class="text-xl font-extrabold tracking-tight block leading-none">YaSe <span class="text-white opacity-90">PRO</span></span>
                <span class="text-[9px] uppercase tracking-[0.2em] font-bold text-slate-400">Sistema de Rastreio</span>
            </div>
        </div>
        
        <nav class="flex-grow mt-4 px-3 space-y-2">
            <a href="Rastreio.html" class="flex items-center space-x-3 p-3 rounded-xl yase-sidebar-item">
                <i class="fas fa-barcode w-5"></i>
                <span class="text-sm font-semibold">Rastreabilidade</span>
            </a>           
        </nav>

        <div class="p-4 mx-3 mb-4 rounded-2xl bg-slate-800/40 border border-white/5">
            <div class="flex items-center space-x-3 mb-3">
                <div class="w-10 h-10 rounded-xl bg-indigo-500 flex items-center justify-center font-bold text-sm">OP</div>
                <div class="overflow-hidden">
                    <p class="text-[10px] uppercase font-bold text-slate-500 leading-none mb-1">Operador Logado</p>
                    <p class="text-xs font-bold text-white truncate">João Silva Santos</p>
                </div>
            </div>
            <button class="w-full flex items-center justify-center space-x-2 py-2 text-[10px] font-bold text-slate-400 hover:text-white border-t border-white/5 pt-3">
                <i class="fas fa-sign-out-alt"></i>
                <span>SAIR DO SISTEMA</span>
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <div class="flex-grow flex flex-col overflow-hidden">
        
        <header class="bg-white border-b border-slate-200 px-8 py-5 flex justify-between items-center z-10">
            <div class="flex items-center space-x-4">
                <h1 class="text-xl font-extrabold text-slate-800">Módulo de Vinculação</h1>
                <div class="h-4 w-px bg-slate-300"></div>
                <nav class="flex text-[11px] font-bold text-slate-400 space-x-2 uppercase tracking-wider">
                    <span>Equipamentos</span>
                    <i class="fas fa-chevron-right text-[8px] self-center"></i>
                    <span class="text-indigo-600">Vinculação de Carga</span>
                </nav>
            </div>
            <div class="flex items-center bg-slate-100 rounded-full px-4 py-1.5 space-x-2">
                <div class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></div>
                <span class="text-[10px] font-bold text-slate-600 uppercase tracking-tighter">Servidor Online</span>
            </div>
        </header>

        <main class="p-6 overflow-y-auto custom-scrollbar space-y-6">
            
            <!-- PAINEL DE FILTROS -->
            <section class="bg-white rounded-xl shadow-sm border border-slate-200 p-5">
                <div class="flex items-center space-x-2 mb-4 border-b border-slate-50 pb-3">
                    <i class="fas fa-filter text-indigo-600 text-xs"></i>
                    <h2 class="text-xs font-extrabold text-slate-500 uppercase tracking-widest">Painel de Filtros</h2>
                </div>

                <div class="flex flex-wrap items-end gap-x-4 gap-y-4">
                    <div class="flex-1 min-w-[180px]">
                        <label class="filter-label">Selo (DE / ATÉ)</label>
                        <div class="flex space-x-1">
                            <input type="text" id="filtroSeloDe" placeholder="Selo Inicial" class="filter-input">
                            <input type="text" id="filtroSeloAte" placeholder="Selo Final" class="filter-input">
                        </div>
                    </div>

                    <div class="flex-1 min-w-[180px]">
                        <label class="filter-label">Cilindro / Patrimônio</label>
                        <div class="flex space-x-1">
                            <input type="text" id="filtroCilindro" placeholder="Nº Cilindro" class="filter-input">
                            <input type="text" id="filtroPatrimonio" placeholder="Patrimônio" class="filter-input">
                        </div>
                    </div>

                    <div class="flex-1 min-w-[150px]">
                        <label class="filter-label">Nº OS</label>
                        <input type="text" id="filtroOS" placeholder="Número da OS" class="filter-input">
                    </div>

                    <div class="flex items-center space-x-2">
                        <button id="btnBuscar" class="btn-buscar">BUSCAR NO BANCO</button>
                        <button id="btnLimpar" class="w-10 h-10 flex items-center justify-center border border-slate-200 rounded-md hover:bg-slate-50 transition text-slate-400">
                            <i class="fas fa-eraser"></i>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Tabela com Dados Reais -->
            <section class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden flex flex-col h-[450px] relative">
                <!-- Overlay de Carregamento -->
                <div id="loadingOverlay" class="absolute inset-0 bg-white/80 z-30 flex flex-col items-center justify-center">
                    <div class="w-8 h-8 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mb-2"></div>
                    <span class="text-xs font-bold text-slate-500 uppercase tracking-widest">Consultando Supabase...</span>
                </div>

                <div class="overflow-x-auto overflow-y-auto custom-scrollbar flex-grow relative">
                    <table class="w-full text-left border-collapse">
                        <thead>
                            <tr class="sticky-header border-b border-slate-200">
                                <th class="px-6 py-4 w-12 text-center">
                                    <input type="checkbox" id="headerCheckbox" class="rounded text-indigo-600 border-slate-300 w-4 h-4">
                                </th>
                                <th class="px-4 py-4 text-[10px] font-extrabold text-slate-500 uppercase tracking-widest">Número OS</th>
                                <th class="px-4 py-4 text-[10px] font-extrabold text-slate-500 uppercase tracking-widest">Cilindro</th>
                                <th class="px-4 py-4 text-[10px] font-extrabold text-slate-500 uppercase tracking-widest">Fabricante</th>
                                <th class="px-4 py-4 text-[10px] font-extrabold text-slate-500 uppercase tracking-widest">Tipo/Capac.</th>
                                <th class="px-4 py-4 text-[10px] font-extrabold text-slate-500 uppercase tracking-widest">Próx. Reteste</th>
                                <th class="px-6 py-4 text-[10px] font-extrabold text-slate-500 uppercase tracking-widest text-right">Selo</th>
                                <th class="px-6 py-4 text-[10px] font-extrabold text-slate-500 uppercase tracking-widest text-right">Carga</th>
                                <th class="px-6 py-4 text-[10px] font-extrabold text-slate-500 uppercase tracking-widest text-right">Capacidade</th>
                                <th class="px-6 py-4 text-[10px] font-extrabold text-slate-500 uppercase tracking-widest text-right">Nível</th>
                                <th class="px-6 py-4 text-[10px] font-extrabold text-slate-500 uppercase tracking-widest text-right">Fabricação</th>
                                <th class="px-6 py-4 text-[10px] font-extrabold text-slate-500 uppercase tracking-widest text-right">Vencimento</th>
                                <th class="px-6 py-4 text-[10px] font-extrabold text-slate-500 uppercase tracking-widest text-right">Lançado em:</th>




                            </tr>
                        </thead>
                        <tbody class="divide-y divide-slate-50" id="tableBody">
                            <!-- Os dados serão inseridos aqui via JS -->
                        </tbody>
                    </table>
                </div>
                
                <div class="px-6 py-3 border-t border-slate-100 flex justify-between items-center bg-slate-50/80">
                    <div class="text-[10px] font-bold text-slate-400 uppercase tracking-tighter">
                        Total Encontrado: <span id="totalCount" class="text-slate-800 ml-1">0</span>
                    </div>
                    <div class="text-[10px] font-bold text-slate-400 uppercase tracking-tighter">
                        Selecionados: <span id="selectedCount" class="text-indigo-600 text-sm ml-1">0</span>
                    </div>
                </div>
            </section>

            <!-- Painel de Vinculação -->
            <section class="bg-indigo-900 rounded-3xl p-8 text-white shadow-xl flex flex-col md:flex-row items-center justify-between gap-6">
                <div class="flex items-center space-x-4">
                    <div class="w-12 h-12 bg-white/10 rounded-2xl flex items-center justify-center text-xl border border-white/10">
                        <i class="fas fa-user-tag text-indigo-300"></i>
                    </div>
                    <div>
                        <h3 class="text-lg font-bold mb-0.5">Vincular Cliente Destino</h3>
                        <p class="text-indigo-300 text-[10px] font-bold uppercase tracking-widest opacity-70">Atribua os equipamentos selecionados</p>
                    </div>
                </div>
                <div class="flex-grow max-w-lg w-full relative">
                    <input type="text" id="inputCliente" placeholder="Nome do cliente ou razão social..." class="w-full bg-white/10 border border-white/20 rounded-xl py-3 pl-10 text-sm outline-none focus:bg-white focus:text-slate-900 transition-all placeholder:text-white/30">
                    <i class="fas fa-search absolute left-3 top-4 text-white/30"></i>
                </div>
                <button id="btnVincular" class="bg-white hover:bg-indigo-50 text-indigo-900 px-8 py-3 rounded-xl font-black text-xs transition flex items-center space-x-2">
                    <span>VINCULAR SELECIONADOS</span>
                    <i class="fas fa-check-circle"></i>
                </button>
            </section>

        </main>
    </div>
<script type="module" src="Vinculacao/main.js"></script>
</body>
</html>